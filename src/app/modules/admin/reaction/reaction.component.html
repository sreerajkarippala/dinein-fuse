

<div class="flex min-w-0 flex-auto flex-col gap-8 container mx-auto px-8">


    <mat-card appearance="outlined" class="rounded-lg mt-8">
        <div #chartContainer></div>
    </mat-card>



    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        
        <mat-card appearance="outlined" class="rounded-lg lg:col-span-6" style="height: 350px;">
            <div #viewChartContainer class="h-full"></div>
        </mat-card>
        <mat-card appearance="outlined" class="rounded-lg lg:col-span-6 h-[225px] lg:h-[350px]">
            <div #openChartContainer class="h-full"></div>
        </mat-card>
    </div>




    <mat-card appearance="outlined" class="rounded-lg mb-8">
        <mat-button-toggle-group name="tableToggle" aria-label="Table Toggle" [(ngModel)]="selectedTable"
        (change)="onTableChange($event.value)" class="flex justify-end p-2">
        <mat-button-toggle value="likes">Likes</mat-button-toggle>
        <mat-button-toggle value="views">Views</mat-button-toggle>
        <mat-button-toggle value="open">Open</mat-button-toggle>
        <mat-button-toggle value="comment">Comment</mat-button-toggle>
    </mat-button-toggle-group>

    <!-- Header Section with Title and Export Menu -->
    <div class="flex justify-between items-center p-4">
        <span class="text-lg font-semibold">
            {{ selectedTable | titlecase }}
        </span>
        <button mat-icon-button [matMenuTriggerFor]="exportMenu">
            <mat-icon svgIcon="heroicons_outline:bars-3"></mat-icon>
        </button>
        <mat-menu #exportMenu="matMenu">
            <button mat-menu-item (click)="exportCurrentTable('csv')">
                <mat-icon>description</mat-icon> Export as CSV
            </button>
            <button mat-menu-item (click)="exportCurrentTable('excel')">
                <mat-icon>table_chart</mat-icon> Export as Excel
            </button>
        </mat-menu>
    </div>
        <!-- Likes Table -->
        <div appearance="outlined" *ngIf="selectedTable === 'likes'">
            <div class="table-container">
                <table mat-table [dataSource]="likeData" class="mat-elevation-z8">
                    
                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef> Email </th>
                        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="dish">
                        <th mat-header-cell *matHeaderCellDef> Dish </th>
                        <td mat-cell *matCellDef="let element"> {{element.dish}} </td>
                    </ng-container>

                
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef> Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
                    </ng-container>

                
                    <tr mat-header-row *matHeaderRowDef="columnsLike"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsLike;"></tr>
                </table>
            </div>
        </div>

        <!-- Views Table -->
        <div appearance="outlined" *ngIf="selectedTable === 'views'">
            <div class="table-container">
                <table mat-table [dataSource]="viewData" class="mat-elevation-z8">
                    
                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef> Email </th>
                        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="dish">
                        <th mat-header-cell *matHeaderCellDef> Dish </th>
                        <td mat-cell *matCellDef="let element"> {{element.dish}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef> Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
                    </ng-container>

                    
                    <tr mat-header-row *matHeaderRowDef="columnsView"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsView;"></tr>
                </table>
            </div>
        </div>

        <!-- Open Table -->
        <div appearance="outlined" *ngIf="selectedTable === 'open'">
            <div class="table-container">
                <table mat-table [dataSource]="openData" class="mat-elevation-z8">
                
                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef> Email </th>
                        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="dish">
                        <th mat-header-cell *matHeaderCellDef> Dish </th>
                        <td mat-cell *matCellDef="let element"> {{element.dish}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef> Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
                    </ng-container>

                    
                    <tr mat-header-row *matHeaderRowDef="columnsOpen"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsOpen;"></tr>
                </table>
            </div>
        </div>

        <!-- Comment Table -->
        <div appearance="outlined" *ngIf="selectedTable === 'comment'">
            <div class="table-container">
                <table mat-table [dataSource]="commentData" class="mat-elevation-z8">
                
                    <ng-container matColumnDef="email">
                        <th mat-header-cell *matHeaderCellDef> Email </th>
                        <td mat-cell *matCellDef="let element"> {{element.email}} </td>
                    </ng-container>

                    
                    <ng-container matColumnDef="comment">
                        <th mat-header-cell *matHeaderCellDef> Comment </th>
                        <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                    </ng-container>

                
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef> Date </th>
                        <td mat-cell *matCellDef="let element"> {{element.date}} </td>
                    </ng-container>

                    
                    <tr mat-header-row *matHeaderRowDef="columnsComment"></tr>
                    <tr mat-row *matRowDef="let row; columns: columnsComment;"></tr>
                </table>
            </div>
        </div>
    </mat-card>



</div>